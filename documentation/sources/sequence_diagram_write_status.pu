@startuml seq_diagram_write_status

actor "Caller" as C
participant "MR25H40" as MR
participant "CsGuard" as CS
participant "Spi" as SPI

C -> MR : write_status(uint8_t sr)
MR -> SPI : cs_assert() (via CsGuard)
MR -> SPI : transfer(WRITE_ENABLE)
MR -> SPI : cs_deassert() (CsGuard destructor)

MR -> SPI : cs_assert() (via CsGuard)
MR -> SPI : transfer(WRSR, sr)
MR -> SPI : cs_deassert() (CsGuard destructor)

MR --> C : status written

@enduml
